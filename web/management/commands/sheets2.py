import sys
import datetime
import time
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.contrib.auth.models import Permission
from web.models import *


data = """
2020-8-21 12:16	5374276216	tt7286966
2020-9-1 12:33	5374276216	tt4682266
2020-9-2 18:43	195671723	tt4815122
2020-9-2 18:46	5374276216	tt2106651
2020-9-3 17:33	5374276216	tt7939766
2020-9-3 19:11	5374276216	tt8244784
2020-9-4 15:56	5374276216	tt4566758
2020-9-22 13:01	5374276216	tt7394816
2020-9-22 13:02	5374276216	tt7395114
2020-9-23 11:07	195671723	tt7846844
2020-9-23 21:44	5374276216	tt5462326
2020-9-23 21:45	5374276216	tt0268126
2020-9-27 16:16	824932139	tt1082807
2020-10-6 20:10	5374276216	tt9624766
2020-10-7 12:00	195671723	tt9660182
2020-10-7 20:53	5374276216	tt0318627
2020-10-14 10:50	5374276216	tt0107120
2020-10-14 19:56	195671723	tt0414387
2020-10-21 19:43	195671723	tt11909878
2020-11-3 12:55	5374276216	tt7946422
2020-11-4 18:58	5374276216	tt1385826
2020-11-4 19:00	5374276216	tt1552211
2020-11-11 21:01	5374276216	tt9820556
2020-11-22 14:12	5374276216	tt9624766
2020-11-26 18:04	824932139	tt7737786
2020-12-1 21:45	5374276216	tt7638348
2020-12-12 22:58	195671723	tt6433880
2020-12-17 10:19	824932139	tt10530176
2020-12-24 17:53	5374276216	tt5649108
2020-12-31 17:59	824932139	tt9484998
2021-1-6 16:13	5374276216	tt10539608
2021-1-6 16:24	5374276216	tt4954522
2021-1-6 16:42	5374276216	tt6908274
2021-1-6 16:42	5374276216	tt4799064
2021-1-6 16:43	5374276216	tt5710514
2021-1-6 16:43	5374276216	tt2386404
2021-1-6 16:44	5374276216	tt2452386
2021-1-13 10:40	5374276216	tt8855960
2021-1-13 10:40	5374276216	tt7939766
2021-1-13 10:40	5374276216	tt11388406
2021-1-13 10:48	5374276216	tt6217306
2021-1-13 10:48	5374276216	tt8508734
2021-1-13 10:49	5374276216	tt7772580
2021-1-13 19:24	5374276216	tt0333766
2021-1-27 14:32	5374276216	tt5742374
2021-2-3 16:44	824932139	tt8637428
2021-2-3 16:47	5374276216	tt5710514
2021-2-5 09:58	5374276216	tt9016974
2021-2-8 10:21	5374276216	tt11252440
2021-2-8 10:24	5374276216	tt9620292
2021-2-11 17:32	5374276216	tt8980602
2021-2-14 10:58	5374276216	tt8114980
2021-2-14 12:20	824932139	tt9784798
2021-2-15 14:34	5374276216	tt5362988
2021-2-21 00:09	824932139	tt0435705
2021-3-1 18:54	5374276216	tt11762434
2021-3-6 23:21	824932139	tt9893250
2021-3-11 14:22	824932139	tt0190590
2021-3-11 14:22	824932139	tt9820556
2021-3-31 13:34	5374276216	tt13932162
2021-4-13 19:43	824932139	tt0993840
2021-4-13 19:45	824932139	tt8385148
2021-4-16 21:14	5374276216	tt7888964
2021-4-17 23:17	824932139	tt5363618
2021-4-19 17:41	824932139	tt11655202
2021-5-22 22:34	824932139	tt8364368
2021-6-11 15:21	824932139	tt6264654
2021-6-11 21:19	5374276216	tt7390588
2021-6-12 10:41	824932139	tt7014006
2021-6-14 08:10	5374276216	tt6402468
2021-6-14 22:53	824932139	tt7737786
2021-6-16 10:26	5374276216	tt11083552
2021-6-23 11:25	5374276216	tt2222042
2021-6-23 11:34	5374276216	tt6341832
2021-6-23 19:36	195671723	tt1588173
2021-6-28 15:01	5374276216	tt9620292
2021-6-30 13:27	5374276216	tt1213663
2021-6-30 13:56	824932139	tt5649108
2021-7-16 08:50	5374276216	tt8368408
2021-7-17 21:55	5374276216	tt11003218
2021-7-20 12:45	5374276216	tt6341832
2021-7-20 12:53	5374276216	tt5562070/ ğŸ¤”
2021-7-23 14:28	5374276216	tt11655202
2021-7-23 14:28	824932139	tt11655202
2021-7-24 19:34	5374276216	tt10228134
2021-7-31 20:42	5374276216	tt0870154
2021-8-4 11:46	5374276216	tt9203694
2021-8-6 22:21	824932139	tt10288566
2021-8-13 11:29	824932139	tt0177789
2021-8-17 15:50	5374276216	tt2140379
2021-8-27 14:43	5374276216	tt5640450
2021-9-1 13:08	195671723	tt7737528
2021-9-1 13:17	5374276216	tt13598976
2021-9-1 14:34	5374276216	tt0453467
2021-9-1 17:20	195671723	tt4479380
2021-9-3 13:12	5374276216	tt9243804
2021-9-3 13:14	5374276216	tt6654210
2021-9-3 13:41	5374276216	tt6882604
2021-9-7 19:46	15244978	tt15164924
2021-9-7 19:57	195671723	tt12885438
2021-9-8 14:30	195671723	tt0120616
2021-9-8 14:30	15244978	tt2345759
2021-9-11 15:41	824932139	tt1192628
2021-9-11 17:04	824932139	tt9376612
2021-9-11 21:45	5374276216	tt4244994
2021-9-13 15:52	195671723	tt1160419
2021-9-14 16:43	5374276216	tt6372694
2021-9-15 20:13	195671723	tt7773340
2021-9-15 21:34	195671723	tt1365519
2021-9-27 08:48	5374276216	tt6372694
2021-9-27 08:49	5374276216	tt2850386
2021-9-27 08:53	5374276216	tt0481499
2021-10-4 10:04	824932139	tt1034415
2021-10-5 18:54	5374276216	tt1465522
2021-10-5 19:07	824932139	tt5834426
2021-10-5 19:07	824932139	tt5563324
2021-10-13 09:59	824932139	tt0439815
2021-10-13 10:03	824932139	tt3504048
2021-10-13 10:04	824932139	tt3705412
2021-10-13 10:13	5374276216	tt9288692
2021-10-26 19:06	5374276216	tt7097896
2021-11-3 09:58	5374276216	tt13024674
2021-11-3 10:00	5374276216	tt13109952
2021-11-5 18:08	5374276216	tt10696784
2021-11-6 20:42	5374276216	tt3420504
2021-11-13 17:57	195671723	tt7991608
2021-11-23 16:15	824932139	tt7888964
2021-11-23 16:25	824932139	tt8980602
2021-11-23 16:26	824932139	tt6060444
2021-11-23 16:28	824932139	tt1321510
2021-12-7 14:50	824932139	tt5362988
2021-12-7 14:53	824932139	tt6116856
2021-12-10 11:03	5374276216	tt9639470
2021-12-12 21:53	15244978	tt9376612
2021-12-16 13:37	15244978	tt0327850
2022-1-17 13:53	824932139	tt11127680
2022-1-18 21:39	5374276216	tt11703050
2022-1-18 21:39	5374276216	tt15777864
2022-1-18 21:43	15244978	tt0790736
2022-1-18 22:06	15244978	tt10831086
2022-1-18 22:06	15244978	tt11080108
2022-1-19 20:15	195671723	tt0081633
2022-1-22 15:17	5374276216	tt13146488
2022-2-1 21:34	5374276216	tt7740496
2022-2-1 21:36	5374276216	tt11703050
2022-2-1 21:36	5374276216	tt8106534
2022-2-1 21:36	5374276216	tt0327850
2022-2-2 14:48	195671723	tt0081633
2022-2-2 14:50	195671723	tt0081633
2022-2-7 07:59	195671723	tt1464335
2022-2-7 16:09	5374276216	tt11541872
2022-2-9 19:35	824932139	tt2017561
2022-2-9 19:35	824932139	tt9368628
2022-2-11 10:01	5374276216	tt6856242
"""

data = [x.split('\t') for x in data.strip().split('\n')]


class Command(BaseCommand):
    help = "Import a google sheets table"

    def handle(self, *args, **options):
        for (t, u, i) in data:
            tt = datetime.datetime.strptime(t, "%Y-%m-%d %H:%M")
            uu = User.objects.get(username=u)
            film = MovieSuggestion.objects.get(imdb_id=i)

            film.suggested_by = uu
            film.added = tt
            film.save()
